<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Database Internazionale - Banche, Truffe Finanziarie e Responsabilit√†</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: #34495e;
            flex-wrap: wrap;
            justify-content: center;
        }

        .nav-tab {
            padding: 15px 25px;
            cursor: pointer;
            border: none;
            background: transparent;
            color: white;
            font-size: 1em;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .nav-tab:hover {
            background: rgba(255,255,255,0.1);
        }

        .nav-tab.active {
            background: rgba(255,255,255,0.15);
            border-bottom-color: #3498db;
        }

        .content {
            padding: 40px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
            font-size: 2em;
        }

        .section h3 {
            color: #34495e;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .country-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .country-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .country-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .country-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .country-name {
            font-size: 1.4em;
            font-weight: bold;
            color: #2c3e50;
        }

        .protection-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            text-transform: uppercase;
        }

        .protection-high {
            background: #27ae60;
            color: white;
        }

        .protection-medium {
            background: #f39c12;
            color: white;
        }

        .protection-low {
            background: #e74c3c;
            color: white;
        }

        .country-info {
            margin-top: 15px;
        }

        .info-row {
            margin-bottom: 10px;
            padding: 8px;
            background: rgba(255,255,255,0.5);
            border-radius: 5px;
        }

        .info-label {
            font-weight: bold;
            color: #2c3e50;
            display: block;
            margin-bottom: 3px;
        }

        .info-value {
            color: #555;
        }

        .info-value a {
            color: #3498db;
            text-decoration: none;
            word-break: break-all;
        }

        .info-value a:hover {
            text-decoration: underline;
        }

        .expand-btn {
            margin-top: 15px;
            padding: 10px 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.3s;
            width: 100%;
        }

        .expand-btn:hover {
            background: #2980b9;
        }

        .ai-instructions {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: rgba(52, 152, 219, 0.1);
            border-left: 4px solid #3498db;
            border-radius: 5px;
        }

        .ai-instructions.show {
            display: block;
            animation: slideDown 0.3s;
        }

        @keyframes slideDown {
            from { opacity: 0; max-height: 0; }
            to { opacity: 1; max-height: 1000px; }
        }

        .ai-instructions h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .ai-instructions p {
            color: #555;
            line-height: 1.8;
        }

        .map-container {
            margin: 30px 0;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .map-legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-color {
            width: 30px;
            height: 30px;
            border-radius: 5px;
        }

        .eu-section {
            background: linear-gradient(135deg, #003399 0%, #0052cc 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin: 30px 0;
        }

        .eu-section h3 {
            color: white;
            margin-top: 0;
        }

        .eu-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .eu-link-card {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .eu-link-card:hover {
            background: rgba(255,255,255,0.2);
        }

        .eu-link-card a {
            color: white;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1em;
        }

        .eu-link-card a:hover {
            text-decoration: underline;
        }

        .eu-link-card p {
            margin-top: 10px;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .country-grid {
                grid-template-columns: 1fr;
            }

            .nav-tab {
                padding: 12px 15px;
                font-size: 0.9em;
            }

            .content {
                padding: 20px;
            }
        }

        canvas {
            max-width: 100%;
            height: auto !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üåç Database Internazionale</h1>
            <p>Banche, Truffe Finanziarie e Responsabilit√†</p>
        </header>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('overview')">Panoramica</button>
            <button class="nav-tab" onclick="switchTab('europa')">Europa</button>
            <button class="nav-tab" onclick="switchTab('asia')">Asia</button>
            <button class="nav-tab" onclick="switchTab('america-latina')">America Latina</button>
            <button class="nav-tab" onclick="switchTab('nord-america')">Nord America</button>
            <button class="nav-tab" onclick="switchTab('oceania')">Oceania</button>
            <button class="nav-tab" onclick="switchTab('africa')">Africa</button>
            <button class="nav-tab" onclick="switchTab('medio-oriente')">Medio Oriente</button>
        </div>

        <div class="content">
            <!-- OVERVIEW TAB -->
            <div id="overview" class="tab-content active">
                <div class="section">
                    <h2>Mappa Mondiale della Protezione degli Investitori</h2>
                    <div class="map-container">
                        <canvas id="protectionChart"></canvas>
                        <div class="map-legend">
                            <div class="legend-item">
                                <div class="legend-color" style="background: #27ae60;"></div>
                                <span>Alta Protezione</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #f39c12;"></div>
                                <span>Media Protezione</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #e74c3c;"></div>
                                <span>Bassa Protezione</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="eu-section">
                    <h3>üá™üá∫ Unione Europea - Risorse Centrali</h3>
                    <p>L'Unione Europea fornisce un quadro normativo completo per la protezione degli investitori e la lotta contro il riciclaggio di denaro.</p>
                    <div class="eu-links">
                        <div class="eu-link-card">
                            <a href="https://www.esma.europa.eu/investor-corner/publications-investors" target="_blank">üìö ESMA - Investor Corner</a>
                            <p>Pubblicazioni e risorse per investitori dall'Autorit√† Europea degli Strumenti Finanziari e dei Mercati</p>
                        </div>
                        <div class="eu-link-card">
                            <a href="https://finance.ec.europa.eu/financial-crime/anti-money-laundering-and-countering-financing-terrorism-eu-level_en" target="_blank">üõ°Ô∏è Commissione Europea - Anti-Money Laundering</a>
                            <p>Quadro normativo UE per la prevenzione del riciclaggio e del finanziamento del terrorismo</p>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>Database Completo per Regione</h2>
                    <p>Seleziona una regione geografica dalle schede sopra per visualizzare le informazioni dettagliate sui paesi, inclusi link per segnalare frodi e contatti delle autorit√† di regolamentazione.</p>
                </div>
            </div>

            <!-- EUROPA TAB -->
            <div id="europa" class="tab-content">
                <div class="section">
                    <h2>üá™üá∫ Europa</h2>
                    <div class="country-grid" id="europa-grid"></div>
                </div>
            </div>

            <!-- ASIA TAB -->
            <div id="asia" class="tab-content">
                <div class="section">
                    <h2>üåè Asia</h2>
                    <div class="country-grid" id="asia-grid"></div>
                </div>
            </div>

            <!-- AMERICA LATINA TAB -->
            <div id="america-latina" class="tab-content">
                <div class="section">
                    <h2>üåé America Latina</h2>
                    <div class="country-grid" id="america-latina-grid"></div>
                </div>
            </div>

            <!-- NORD AMERICA TAB -->
            <div id="nord-america" class="tab-content">
                <div class="section">
                    <h2>üçÅ Nord America</h2>
                    <div class="country-grid" id="nord-america-grid"></div>
                </div>
            </div>

            <!-- OCEANIA TAB -->
            <div id="oceania" class="tab-content">
                <div class="section">
                    <h2>ü¶ò Oceania</h2>
                    <div class="country-grid" id="oceania-grid"></div>
                </div>
            </div>

            <!-- AFRICA TAB -->
            <div id="africa" class="tab-content">
                <div class="section">
                    <h2>ü¶Å Africa</h2>
                    <div class="country-grid" id="africa-grid"></div>
                </div>
            </div>

            <!-- MEDIO ORIENTE TAB -->
            <div id="medio-oriente" class="tab-content">
                <div class="section">
                    <h2>üïå Medio Oriente</h2>
                    <div class="country-grid" id="medio-oriente-grid"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const countriesData = {
            'Arabia Saudita': {
                region: 'medio-oriente',
                protection: 'medium',
                fraudLink: 'https://sama.gov.sa/en-us/pages/default.aspx',
                authorityEmail: 'info@sama.gov.sa',
                aiInstructions: 'In Arabia Saudita, la Capital Market Authority (CMA) supervisiona i mercati finanziari. Per segnalare frodi finanziarie, contatta la Saudi Arabian Monetary Authority (SAMA). Verifica sempre che gli intermediari siano registrati presso la CMA prima di investire.'
            },
            'Argentina': {
                region: 'america-latina',
                protection: 'medium',
                fraudLink: 'https://www.cnv.gov.ar/SitioWeb/Denuncias',
                authorityEmail: 'consultas@cnv.gob.ar',
                aiInstructions: 'In Argentina, la Comisi√≥n Nacional de Valores (CNV) regola i mercati finanziari. Per segnalare truffe o attivit√† sospette, utilizza il portale di denunce della CNV. Verifica sempre la registrazione degli operatori finanziari.'
            },
            'Australia': {
                region: 'oceania',
                protection: 'high',
                fraudLink: 'https://www.scamwatch.gov.au/report-a-scam',
                authorityEmail: 'info.asic@asic.gov.au',
                aiInstructions: 'In Australia, l\'Australian Securities and Investments Commission (ASIC) protegge gli investitori. Segnala frodi tramite Scamwatch o ASIC. L\'Australia ha un sistema di protezione robusto con compensazioni fino a AUD 500.000.'
            },
            'Brasile': {
                region: 'america-latina',
                protection: 'medium',
                fraudLink: 'https://www.gov.br/cvm/pt-br/canais_atendimento/denuncias',
                authorityEmail: 'atendimento@cvm.gov.br',
                aiInstructions: 'In Brasile, la Comiss√£o de Valores Mobili√°rios (CVM) regola i mercati. Per segnalare frodi, usa il sistema di denunce della CVM. Verifica sempre che gli intermediari siano autorizzati dalla CVM o dalla Banca Centrale del Brasile.'
            },
            'Canada': {
                region: 'nord-america',
                protection: 'high',
                fraudLink: 'https://www.antifraudcentre-centreantifraude.ca/report-signalez-eng.htm',
                authorityEmail: 'info@csa-acvm.ca',
                aiInstructions: 'In Canada, ogni provincia ha il proprio regolatore di valori mobiliari. Il Canadian Anti-Fraud Centre raccoglie segnalazioni di frodi. La protezione degli investitori √® elevata, con fondi di compensazione provinciali.'
            },
            'Cile': {
                region: 'america-latina',
                protection: 'medium',
                fraudLink: 'https://www.cmfchile.cl/portal/principal/605/w3-propertyvalue-26178.html',
                authorityEmail: 'atencion_clientes@cmfchile.cl',
                aiInstructions: 'In Cile, la Comisi√≥n para el Mercado Financiero (CMF) supervisiona i mercati. Per segnalare frodi, contatta la CMF. Verifica sempre la registrazione degli intermediari presso la CMF prima di investire.'
            },
            'Costa Rica': {
                region: 'america-latina',
                protection: 'medium',
                fraudLink: 'https://www.sugeval.fi.cr/servicios/Paginas/Denuncias.aspx',
                authorityEmail: 'info@sugeval.fi.cr',
                aiInstructions: 'In Costa Rica, la Superintendencia General de Valores (SUGEVAL) regola i mercati finanziari. Segnala attivit√† sospette tramite il portale SUGEVAL. Verifica sempre l\'autorizzazione degli operatori.'
            },
            'Danimarca': {
                region: 'europa',
                protection: 'high',
                fraudLink: 'https://www.dfsa.dk/Tilsyn/Anmeld-ulovlig-finansiel-virksomhed',
                authorityEmail: 'dfsa@dfsa.dk',
                aiInstructions: 'In Danimarca, la Danish Financial Supervisory Authority (DFSA) protegge gli investitori. Segnala attivit√† illegali tramite il portale DFSA. La Danimarca ha un alto livello di protezione degli investitori conforme alle direttive UE.'
            },
            'Filippine': {
                region: 'asia',
                protection: 'medium',
                fraudLink: 'https://www.sec.gov.ph/file-a-complaint/',
                authorityEmail: 'info@sec.gov.ph',
                aiInstructions: 'Nelle Filippine, la Securities and Exchange Commission (SEC) regola i mercati. Segnala frodi tramite il sistema di reclami SEC. Verifica sempre la registrazione delle societ√† presso la SEC.'
            },
            'Francia': {
                region: 'europa',
                protection: 'high',
                fraudLink: 'https://www.amf-france.org/fr/espace-epargnants/proteger-son-epargne/faire-un-signalement',
                authorityEmail: 'contact@amf-france.org',
                aiInstructions: 'In Francia, l\'Autorit√© des march√©s financiers (AMF) protegge gli investitori. Segnala truffe tramite il portale AMF. La Francia offre alta protezione conforme alle normative UE, con sistema di garanzia fino a ‚Ç¨70.000.'
            },
            'Germania': {
                region: 'europa',
                protection: 'high',
                fraudLink: 'https://www.bafin.de/DE/Verbraucher/BeschwerdenAnzeigen/Anzeige/anzeige_node.html',
                authorityEmail: 'poststelle@bafin.de',
                aiInstructions: 'In Germania, la BaFin (Bundesanstalt f√ºr Finanzdienstleistungsaufsicht) supervisiona i mercati finanziari. Segnala attivit√† sospette tramite BaFin. La Germania offre protezione elevata con compensazione fino a ‚Ç¨100.000 per depositi e ‚Ç¨20.000 per investimenti.'
            },
            'Giappone': {
                region: 'asia',
                protection: 'high',
                fraudLink: 'https://www.fsa.go.jp/receipt/soudansitu/index.html',
                authorityEmail: 'kouekituuhou@fsa.go.jp',
                aiInstructions: 'In Giappone, la Financial Services Agency (FSA) regola i mercati. Segnala frodi tramite il sistema di consulenza FSA. Il Giappone ha un sistema di protezione robusto con l\'Investor Protection Fund.'
            },
            'Gibilterra': {
                region: 'europa',
                protection: 'high',
                fraudLink: 'https://www.gfsc.gi/complaints',
                authorityEmail: 'info@gfsc.gi',
                aiInstructions: 'A Gibilterra, la Gibraltar Financial Services Commission (GFSC) regola i servizi finanziari. Segnala problemi tramite il sistema di reclami GFSC. Gibilterra segue standard elevati di protezione degli investitori.'
            },
            'Hong Kong': {
                region: 'asia',
                protection: 'high',
                fraudLink: 'https://www.sfc.hk/en/Regulatory-functions/Intermediaries/Supervision/Report-suspicious-activities',
                authorityEmail: 'enquiry@sfc.hk',
                aiInstructions: 'A Hong Kong, la Securities and Futures Commission (SFC) protegge gli investitori. Segnala attivit√† sospette tramite SFC. Hong Kong offre protezione elevata con il Compensation Fund.'
            },
            'India': {
                region: 'asia',
                protection: 'medium',
                fraudLink: 'https://scores.gov.in/scores/Welcome.html',
                authorityEmail: 'sebi@sebi.gov.in',
                aiInstructions: 'In India, la Securities and Exchange Board of India (SEBI) regola i mercati. Usa il sistema SCORES per segnalare reclami. Verifica sempre la registrazione degli intermediari presso SEBI.'
            },
            'Italia': {
                region: 'europa',
                protection: 'high',
                fraudLink: 'https://www.consob.it/web/area-pubblica/segnalazioni',
                authorityEmail: 'consob@consob.it',
                aiInstructions: 'In Italia, la CONSOB (Commissione Nazionale per le Societ√† e la Borsa) supervisiona i mercati finanziari. Segnala truffe tramite il portale CONSOB. L\'Italia offre protezione elevata conforme alle direttive UE, con il Fondo Nazionale di Garanzia fino a ‚Ç¨20.000.'
            },
            'Portogallo': {
                region: 'europa',
                protection: 'high',
                fraudLink: 'https://www.cmvm.pt/pt/Supervisao/Reclamacoes/Pages/default.aspx',
                authorityEmail: 'cmvm@cmvm.pt',
                aiInstructions: 'In Portogallo, la Comiss√£o do Mercado de Valores Mobili√°rios (CMVM) regola i mercati. Segnala problemi tramite il sistema di reclami CMVM. Il Portogallo offre alta protezione conforme alle normative UE.'
            },
            'Singapore': {
                region: 'asia',
                protection: 'high',
                fraudLink: 'https://www.mas.gov.sg/who-we-are/contact-us/report-a-scam',
                authorityEmail: 'webmaster@mas.gov.sg',
                aiInstructions: 'A Singapore, la Monetary Authority of Singapore (MAS) protegge gli investitori. Segnala truffe tramite MAS. Singapore ha un sistema di protezione robusto e rigoroso.'
            },
            'Spagna': {
                region: 'europa',
                protection: 'high',
                fraudLink: 'https://www.cnmv.es/portal/Consultas/Atencion-Consumidor.aspx',
                authorityEmail: 'cnmv@cnmv.es',
                aiInstructions: 'In Spagna, la Comisi√≥n Nacional del Mercado de Valores (CNMV) supervisiona i mercati. Segnala frodi tramite il servizio consumatori CNMV. La Spagna offre alta protezione conforme alle direttive UE.'
            },
            'Sudafrica': {
                region: 'africa',
                protection: 'medium',
                fraudLink: 'https://www.fsca.co.za/Complaints/Pages/default.aspx',
                authorityEmail: 'info@fsca.co.za',
                aiInstructions: 'In Sudafrica, la Financial Sector Conduct Authority (FSCA) regola i mercati finanziari. Segnala problemi tramite il sistema di reclami FSCA. Verifica sempre la licenza degli operatori.'
            },
            'Unione Europea': {
                region: 'europa',
                protection: 'high',
                fraudLink: 'https://www.esma.europa.eu/investor-corner/publications-investors',
                authorityEmail: 'info@esma.europa.eu',
                aiInstructions: 'L\'Unione Europea fornisce un quadro normativo completo tramite ESMA, MiFID II, e direttive anti-riciclaggio. Ogni stato membro ha la propria autorit√† di vigilanza. La protezione degli investitori √® armonizzata con fondi di garanzia nazionali.'
            }
        };

        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked nav tab
            event.target.classList.add('active');
        }

        function toggleAI(countryName) {
            const element = document.getElementById(`ai-${countryName.replace(/\s+/g, '-')}`);
            element.classList.toggle('show');
        }

        function createCountryCard(countryName, data) {
            const protectionClass = `protection-${data.protection}`;
            const protectionText = data.protection === 'high' ? 'Alta' : data.protection === 'medium' ? 'Media' : 'Bassa';
            
            return `
                <div class="country-card">
                    <div class="country-header">
                        <div class="country-name">${countryName}</div>
                        <div class="protection-badge ${protectionClass}">${protectionText}</div>
                    </div>
                    <div class="country-info">
                        <div class="info-row">
                            <span class="info-label">üîó Segnala Frodi:</span>
                            <span class="info-value"><a href="${data.fraudLink}" target="_blank">${data.fraudLink}</a></span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">üìß Email Autorit√†:</span>
                            <span class="info-value"><a href="mailto:${data.authorityEmail}">${data.authorityEmail}</a></span>
                        </div>
                    </div>
                    <button class="expand-btn" onclick="toggleAI('${countryName}')">
                        üìã Istruzioni AI per Protezione
                    </button>
                    <div class="ai-instructions" id="ai-${countryName.replace(/\s+/g, '-')}">
                        <h4>Istruzioni di Protezione AI</h4>
                        <p>${data.aiInstructions}</p>
                    </div>
                </div>
            `;
        }

        function populateRegions() {
            const regions = {
                'europa': [],
                'asia': [],
                'america-latina': [],
                'nord-america': [],
                'oceania': [],
                'africa': [],
                'medio-oriente': []
            };

            // Group countries by region
            for (const [country, data] of Object.entries(countriesData)) {
                regions[data.region].push({ name: country, data: data });
            }

            // Populate each region
            for (const [region, countries] of Object.entries(regions)) {
                const grid = document.getElementById(`${region}-grid`);
                if (grid) {
                    grid.innerHTML = countries
                        .sort((a, b) => a.name.localeCompare(b.name))
                        .map(country => createCountryCard(country.name, country.data))
                        .join('');
                }
            }
        }

        function createProtectionChart() {
            const ctx = document.getElementById('protectionChart').getContext('2d');
            
            const protectionLevels = {
                high: 0,
                medium: 0,
                low: 0
            };

            for (const data of Object.values(countriesData)) {
                protectionLevels[data.protection]++;
            }

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(countriesData).sort(),
                    datasets: [{
                        label: 'Livello di Protezione',
                        data: Object.entries(countriesData).sort((a, b) => a[0].localeCompare(b[0])).map(([_, data]) => {
                            return data.protection === 'high' ? 3 : data.protection === 'medium' ? 2 : 1;
                        }),
                        backgroundColor: Object.entries(countriesData).sort((a, b) => a[0].localeCompare(b[0])).map(([_, data]) => {
                            return data.protection === 'high' ? '#27ae60' : data.protection === 'medium' ? '#f39c12' : '#e74c3c';
                        }),
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'Livelli di Protezione degli Investitori per Paese',
                            font: {
                                size: 16
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 3,
                            ticks: {
                                stepSize: 1,
                                callback: function(value) {
                                    return value === 3 ? 'Alta' : value === 2 ? 'Media' : value === 1 ? 'Bassa' : '';
                                }
                            }
                        },
                        x: {
                            ticks: {
                                maxRotation: 90,
                                minRotation: 45
                            }
                        }
                    }
                }
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            populateRegions();
            createProtectionChart();
        });
    </script>
</body>
</html>